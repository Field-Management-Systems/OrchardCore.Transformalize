@model BulkActionViewModel
@using Module

<script asp-name="jQuery" at="Head"></script>
<script asp-name="jQuery-ui" at="Foot"></script>
<script asp-name="block-ui" version="2.70.0" at="Foot"></script>
<script asp-name="pickadate-picker-date" version="3.6.4" at="Foot"></script>
<script asp-name="parsley" version="2.9.2" at="Foot"></script>
<script asp-name="moment" version="2.26.0" at="Foot"></script>

<style>
   #busy {
      position: fixed;
      left: 46%;
      top: 40%;
      display: none;
      background: transparent url(@Url.Content($"~/{Common.ModuleName}/Styles/busy.gif"));
      background-size: 149px 149px;
      background-repeat: no-repeat;
      z-index: 1020;
      height: 150px;
      width: 150px;
   }

   #busy-holder {
      background: transparent;
      width: 100%;
      height: 100%;
   }
</style>

<h3>Bulk Action Review</h3>

@if (Model.Summary != null && Model.Summary.Entities.Any() && Model.Summary.Entities[0].Rows.Any()) {
   var fields = Model.Summary.Entities[0].GetAllOutputFields().ToArray();
   var row = Model.Summary.Entities[0].Rows[0];
   <table class="table table-striped table-sm">
      <thead>
         <tr>
            <th scope="col">#</th>
            <th>Name</th>
            <th>Value</th>
         </tr>
      </thead>
      <tbody>
         @for (int i = 0; i < fields.Length; i++) {
            var field = fields[i];
            <tr>
               <th scope="row">@(i+1)</th>
               <td>@field.Label</td>
               <td>@(field.Raw ? Html.Raw(row[field.Alias]) : row[field.Alias])</td>
            </tr>
         }
      </tbody>
   </table>
}

@if(Model.Task != null) {
   <h4>Parameters</h4>
   <ul>
      @foreach(var parameter in Model.Task.Parameters) {
         <li>@parameter.Name = @parameter.Value</li>
      }
   </ul>
   <h4>Actions</h4>
   <ul>
      @foreach (var action in Model.Task.Actions) {
         <li>@action.Type</li>
      }
   </ul>
   <h4>Entities</h4>
   <ul>
      @foreach(var entity in Model.Task.Entities) {
         <li>@entity.Name</li>
      }
   </ul>
}

<div id="busy_holder">
   <div id="busy"></div>
</div>

<script type="text/javascript">
   //<!--
   //-->
</script>